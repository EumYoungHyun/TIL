# 클린코드 (서론, 1장, 2장)

> 개발의 정석

오래됬음에도, Java로 이루어진 책 임에도 찾게되는 이유가 있다.  
대다수의 개발자가 개발 서적중 가장 유명한 책을 고르라면 `클린코드`를 뽑지 않을까?  
이 책이 아직도 사랑받는 이유는 이 책이 가지고 있는 인사이트는 아직도 통한다라는 뜻이 아닐까?  
이 책을 다시 정리해보며 그간 잊고있었던 클린 코드의 내용들을 다시 상기시키는 시간을 갖고자 책을 꺼내들었다.

## [서론]

개발에 있어 `장인 정신`을 기르는 방법은 무엇일까?  
장인 정신을 익히는 과정은 **이론**과 **실전**의 조화가 필요하다.

이론: 기술에 필요한 원칙, 패턴, 기법, 경험이라는 지식을 습득  
실전: 이론을 잘 실현하기 위해 반복 숙달

자전거 타기를 잘 하기 위해서 자전거를 잘 타는 이론은 익힐 수 있겠지만,  
자전거를 처음 타는 사람이라면 그 누구라도 넘어지게 되어있다.

개발도 마찬가지이다. 이 책에서 보여주는 이론들을 아무리 익혀도,  
사람들이 실수하고, 수정하는 과정을 보며 숙달해야 한다.  
반복되는 실전과 이론의 학습의 조화를 통해 진정한 개발자로 거듭나야 한다.

그런 의미에서 이 책은 실전서이다.  
코드를 분석하고 고치며 작가가 느끼는 감정을 이해하려 애썼고,  
그들이 생각하는 방식을 최대한 녹여낸 책이다.

시간도 많이 지났고, 그들의 생각이 항상 100% 옳다고는 할 수없지만  
이 책은 당시 최고들이 만들어낸 최선의 결과물이었으며,  
지금도 통용되는 클린코드의 시작점임을 잊지 말자.  
이 책을 철저히 익혀 자신의 것으로 만드는 것이 좋은 개발자가 되는 첫 걸음일 것이다.

---

<br />

## [1장 깨끗한 코드]

누군가는 코드가 사라질 것이라고 주장하지만, 작가는 절대 이 말에 동의하지 않는다.  
코드란 모델이나 요구사항을 가장 상세히 표현한 언어이기 때문이다.  
코드 이상의 상세한 표현은 불가능하다. 추상화도 불가능하다.  
기계가 실행할 정도로 상세하게 요구사항을 명시하는 작업이 프로그래밍이다.

### 나쁜코드

    80년대 후반 킬러 앱을 구현한 회사가 있었다.
    제품은 커다란 인기를 끌었으며 수 많은 전문가들이 구매해 사용했다.
    제품의 기능은 늘어나게 되었고 사람들은 그 기능들을 좋아했다.

    그런데 제품 출시 주기가 점차 늘어나기 시작했다.
    이전 버전에 있던 버그가 다음 버전에 그대로 남아있기도 했고,
    프로그램 시동 시간이 길어지며, 프로그램이 죽는 횟수도 점점 늘어났다.

    사람들은 점차 이 앱을 쓰며 화를 내기 시작했고,
    이용자들은 점점 이 앱에서 이탈하여 다시 돌아오지 않았다.

    이 회사는 얼마 지나지 않아 결국 망하게 되었다.

후에, 이 회사 직원과 이야기 해본 결과 이유는 간단했다.
`나쁜 코드`로 인해 회사가 망해버린 것이다.

개발자라면 누구나 나쁜 코드로 고생해보았을 것이다.  
레거시 코드를 작성한 그들은 (나는) 왜 나쁜코드를 짰을까?  
시간이 없어서? 실력이 부족해서? 어떤 이유라도 핑계일 뿐이다.

대부분의 경우 일단 프로그램이 돌아간다는 사실에 안도감을 느끼며  
나중에 정리하겠다는 다짐을 하게 된다.  
르블랑의 법칙. 모두가 알겠지만 그 때란 다신 오지 않는다.

나쁜코드는 생산성을 0로 만드는 힘이 있다.  
처음에는 속도도 나고, 기능들도 늘어나는 느낌이 좋을 것이다.  
필요한 기능들이 늘어날 수록 무언가 해낸 느낌이 들고,  
돌아가기만 하면 된다는 마음가짐이 점점 꼬인 실타래를 만든다.  
나중에 후회해도 소용없다. 엉켜버린 거대한 실뭉치로는 도저히 목도리를 짤 수 없다.

이에 새로운 타이거팀이 기존의 서비스를 처음부터 재설계하겠다는  
원대한 목표를 가지고 달려든다.  
하지만 그들은 기존의 서비스를 아름답게 돌아가도록 만들면서,  
무책임하게 확장되어가는 서비스의 기능들도 함께 완성시켜야 한다.  
대부분의 TF팀은 그들의 존재 이유를 잃고 망가지기 마련이다.

나쁜 코드는 많은 시간과 비용을 치르게 한다.  
시간과 비용을 절감하기 위해서, 전문가로서 살아남기 위해서는  
깨끗한 코드를 작성해야 한다.  
<br/>

### 태도

관리자들이 현실적인 이유를 들어가며 다소 불가능한 제작 일정을 요구한다면  
이를 받아들일 것인가? 그럴 수도 있지 않을까?  
<br />
아니다. 개발 전문가라면 절대 받아들여선 안된다.  
이는 환자가 의사에게 손을 씻지 않고 수술해달라는 요구를 하는 꼴이다.  
비 개발직종의 요구사항을 들어 주는 것은 좋지만, 개발자의 판단하에  
현실성없는 일정이라면 이를 거부할 줄도 알아야한다.  
일정을 맞추기 위해 대충 나쁜 코드로 점철된 코드 덩이를 만들어 내면 안된다.  
그리고 제대로 된 관리자라면 제품의 미래를 망쳐가며 그런 일정을 소화하라고  
요구하지 않을 것임을 믿는다.  
<br />

### 깨끗한 코드

그렇다면 깨끗한 코드는 어떻게 작성할 수 있을까?  
저명한 선배들의 답변을 요약해보았다.

    우하하고 효율적인 코드를 짜야한다. 논리가 간단하고 의존성이 최대한 줄여져야 한다. 깨끗한 코드는 한가지를 제대로 한다. - 스트롭스트룹

    깨끗한 코드는 단순하고 직접적이다. 꺠긌한 코드는 잘 쓴 문장처럼 읽힌다. 명쾌한 추상화와 단순한 제어문으로 가득하다. - 그래디 부치

    깨끗한 코드는 작성자가 아니어도 읽고 고치기 쉽다. 테스트 케이스가 존재하고 특정 목적을 달성하는 방법은 하나만 제공한다 - 데이브 토마스

    깨끗한 코드는 모두를 아우르는 특징이 있다. 언제나 주의 깊게 짰다는 느낌을 주고 고치려고 봐도 딱히 손 댈 곳이 없다. - 마이클 패더스

    모든 테스트를 통과하며, 중복을 줄이고, 한 기능만 수행하고, 제대로 표현하며 작게 추상화 해야한다. - 론 제프리스

    코드를 읽으며 짐작했던 기능을 그대로 수행해야 한다.
    코드가 그 문제를 풀기 위한 언어처럼 보인다면 아름다운 코드다 - 워닝 커드햄

이 책에서 주장하는 기법 다수는 논쟁의 여지가 있다. 모든 기법에 동의하지 않더라도 이 기법들은 그들이 믿는 종교같은 진리이다.  
반복적인 시행착오와 교훈을 통해 자신의 방법으로 실력을 키우기를 바란다.  
<br />

### 보이스카우트 규칙

`캠핑장은 처음 왔을 때보다 더 깨끗하게 해놓고 나가라`  
이 문장은 개발자에게도 동일하게 적용된다.  
처음부터 모든 것을 뜯어고칠 필요도 없다.  
코드들을 한번 볼때마다 하나씩 정리한다면,  
시간이 지날 수록 코드가 좋아지는 프로젝트가 될 것이다.  
<br/>

### 결론

예술에 대한 책을 읽는다고 예술가가 되진 않는다.  
책은 단지 도구와 기법, 생각하는 방식을 소개할 뿐이다.

이 책 또한 읽는다고 뛰어난 개발자가 되는것은 아니다.  
하지만 뛰어난 개발자가 어떻게 생각하고 개발하는지를 안다면  
조금 더 그들의 곁으로 다가갈 수 있다.

나머지는 독자들에게 달렸다.

---

<br />

## [2장 의미 있는 이름]

이름은 개발 모든 영역에 빠지지 않고 들어간다.  
그 말은 클린코드에서 빠질 수 없는 영역임을 암시한다.

여기 몇가지 지침이 있다.

<br />

### 1. 의도를 분명히 밝혀라

의도가 분명한 이름은 **정말로** 중요하다.  
좋은 이름을 지으려면 시간이 걸리지만, 오히려 길게 본다면 이 덕에 시간을 줄일 수 있다. 그러므로 이름을 주의 깊게 살펴 더 나은 이름이 떠오른다면 바로바로 개선해야 한다.  
예시를 들어보겠다.

```java
int d // 경과시간 (단위: 날짜)
```

이름 d는 아무 의미도 드러나지 않는다. 경과 시간이나 날짜라는 느낌이 전혀 들지 않는다. 측정하려는 단위를 표현하는 이름이 필요하다.

```java
int elapsedTimeInDays;
int daysSinceCreation;
int daysSinceModification;
int fileAgeInDays;
```

의도가 드러나는 이름을 사용하면 코드 이해와 변경이 쉬워진다.

```java
public List<int[]> getThem() {
    List<int[]> list1 = new ArrayList<int[]>();

    for (int[] x: theList)
        if (x[0] == 4)
            list1.add(x);
    return list1;
}
```

위 코드를 보고 하는 일을 짐작할 수 있는 사람은 거의 없다.  
이 코드를 보면 다음과 같은 의문점이 들 것 이다.

1. theList에 무엇이 들어있는가?
2. theList에서 0번째 값이 어째서 중요한가?
3. 값 4는 무엇을 의미하는가?
4. 함수가 반환하는 리스트 list1을 어떻게 사용할 것인가.

위 코드는 이름만 잘 정의되었다면 충분한 정보제공이 가능한 로직이다.  
다시 이름을 정의해보겠다.

```java
public List<int[]> getFlaggedCells() {
    List<int[]> flaggedCells = new ArrayList<int[]>();
    for (int[] cell : gameBoard)
        if (cell[STATUS_VALUE] == FLAGGED)
            flaggedCells.add(cell);
    return flaggedCells;
}
```

위 코드가 지뢰찾기 게임의 함수임을 안다면 많은 정보를 얻어갈 수 있다.

한걸음 더 나아가 int 형 대신 class를 이용한다면, isFlagged라는 좀 더 명시적인 함수를 사용해 FLAGGED라는 상수를 감춰도 좋다. 코드는 더 명확해질 수 있다.

```java
public List<Cell> getFlaggedCells() {
    List<Cell> flaggedCells = new ArrayList<Cell>();
    for (Cell cell : gameBoard)
        if (cell.isFlagged())
            flaggedCells.add(cell);
    return flaggedCells;
}
```

이름만 고쳤음에도 함수가 하는 일을 이해하기 쉬워졌다. 이것이 이름이 가진 힘이다.  
<br/>

### 그릇된 정보를 피해라

hp, aix, sco같은 변수를 본적이 있는가?  
누군가에게 이 변수들은 훌륭한 약어일지 모르나 적어도 대다수의 개발자에겐 그렇지 않다.

여러계정을 묶을때 List가 아님에도 accountList라는 변수를 쓴다면 대다수의 개발자에게 혼동이 될 수 있다. 애초에 List라는 타입을 정의하는 것 조차 좋지 않은 네이밍이고, 실제 List가 아니라면 수 많은 개발자들에게 혼동을 줄 수 있는 명명법이기 때문이다.

또한 변수들이 서로 흡사한 이름을 가지지 않게 주의해야 한ㄷ.  
abcEffectHadlingOfString이라는 변수와  
abcEffectColtrolBySttring이라는 변수가 있다면

조금 멀리 떨어진 모듈에서 이 둘을 비교하며 사용하기란 쉽지 않다.

이 중 가장 끔직한 예는 소문자 L과 대문자 O 변수이다.

```java
int a = l;
if ( O == 1 )
    a = O1;
else
    l = 01;
```

다소 억지스러울 수 있으나. 제대로 알아보기 위해선 폰트 변경이 불가피하다.  
그리고 이런 비슷한 코드를 작가는 실제로 본적이 있다고 한다.

<br />

### 의미 있게 구분하라

컴파일러나 인터프리터만 통과하려는 생각으로 코드를 구현한다면  
그 프로그래머는 스스로 문제를 일으키는 사람이다.

한 범위 내에서 같은 이름을 쓰지 못한다고 class를 klass라는 식의  
이름을 짓는다면 그 고민시간 이상의 시간을 버리게 될 것이다.

불용어(a1, a2, ..., aN) 또한 의도적인 이름이 아니다.

```java
public static void copyChars(char a1[], char a2[]) {
    ...
}
```

함수 인수 이름으로 souce와 destination을 사용한다면 코드 읽기가 훨씬 더 쉬워졌을 것이다.

불용어는 숫자만 추가한것들이 아니다.  
a, the, Data, Info, List, Arr, String, I(Interface) 등  
다른 불용어들을 붙이는 것도 그다지 좋은 네이밍이 아니다.

Name과 NameString을 보자.  
이름에 부동소수점이 들어갈 수 있겠는가?  
그건 애초에 이름이 아니다.  
다른 불용어는 어떨까?

moneyAmount와 money는 구분이 안 된다.  
customerInfo와 customer도,  
accountData와 account,  
theMessage와 message 또한 구분이 안된다.

읽는 사람이 차이를 알 수 있도록 이름을 지어야 한다.  
<br />

### 발음하기 쉬운 이름을 사용하라.

코드를 토론할때 genymdhms (generate date, year, month, day, hour, minute, second) 같은 변수를 쓴다면 어떻게 발음할 것인가?  
실제로 한 회사에서 쓰던 변수명이란다.  
직원들은 이를 **젠 야 무다 힘즈** 라는 식으로 발음하며 비웃었지만,  
결국 이 형편없는 이름을 참고 있었다는 것을 뜻한다.

<br />

### 검색하기 쉬운 이름을 사용해라

숫자로 기술되어 이름이 없거나 e같은 이름의 변수를 검색하기란  
거의 불가능에 가깝다.  
그냥 해당 로직이 짜여져 있는 아키텍쳐에서 찾는게 더 빠를 것이다.

하지만 5라는 숫자 말고 WORK_DAYS_PER_WEEK이라는 상수는 어떨까?

이런 상수들은 검색하기 쉽다. **이름의 길이는 범위 크기에 비례해야 한다.**

<br />

### 인코딩을 피하라

과거 헝가리식 표기법인 변수 표기에는 타입을 꼭 명시해주어야 했다.  
m*phoneNumber, m_description = name 같은 명명법은  
개발자들이 자연스럽게 m*를 무시하고 읽게 되었다.

언어가 바뀌면서 더이상 타입을 인코딩할 필요가 없어지면서,  
(JS라면 모르겠지만 TS가 나온 이상 명명법이 필요 없다.)  
불필요한 정보만 추가될 뿐, 아무런 의미가 없어졌다.

<br />

### 자신의 기억력을 믿지 마라

독자가 코드를 읽으면서 변수 이름을 자신만 아는 이름으로 변환해야 한다면 그 변수 이름은 바람직 하지 않다.  
for문의 루프 변수도 i,j,k 까진 괜찮다. (l은 절대 안된다)

똑똑한것은 좋다.  
하지만 과하면 체하는 법이다.  
똑똑함을 과시하고 싶다면 잘못된 장소를 선택한 것 같다.

진정한 전문 개발자는 **명료함**이 최고의 가치임을 잊지 않는다.

<br />

### 클래스 이름과 매서드 이름

클래스 이름은 명사나 명사구로 작성한다.  
Customer, WikiPage 등...

매서드 이름은 javabeans 표준에 따라 get, set, is등의 어구를 붙혀준다.

<br />

### 기발한 이름은 피하라

이름이 너무 기발하면 저자와 유머 감각이 비슷한 사람만 기억하고 좋아한다.

kill()대신 Whack()이나  
delete 대신 nuclearBomb같은 이름을 쓴다면  
누군가 이 유머를 보고 욕을 날려줄 것이다.

전문 개발자는 항상 **명료함**이 최고의 가치임을 또 강조해본다.

<br />

### 한 개념에 한 단어를 사용하라

fetch와 retrieve, get을 혼용하면 혼돈스럽다.  
아마 API를 이용하거나 함수를 이용할 때마다 이름을 확인해야 할 것이다.  
Add, make, create또한 마찬가지다.  
일관성 있는 어휘를 이용해 추가적인 확인이 필요 없도록 작성해야 한다.

<br />

### 말장난하지 마라

위의 개념과 부합하는 내용이다.  
지금까지 기존값에 무언가를 더하는 매서드를 모두 add로 구현했다고 했을때,  
새로운 값을 만드는 매서드에 add라는 이름을 붙이는건 어떨까?  
이 매서드에 add를 붙혀도 괜찮을까?

여태까지의 매서드가 없었다면 (다른 파일에서도 add를 쓰지 않았다면)
나쁘지 않다.  
하지만 이미 add라는 매서드를 무언가 값을 더하는곳에 사용했다면,  
기존의 add와 맥락이 다르므로 insert나 append가 더 어울릴 것이다. (사실은 처음부터 append가 더 어울렸을 것이다)

프로그래머는 코드를 최대한 이해하기 쉽게 작성할 줄 알아야 한다.  
코드 해석에 탐구가 필요하면 안된다.  
대충 훑어봐도 이해할 코드 작성을 목표로 구현해야 한다.

당신은 프로그래밍을 논문을 쓰는 것이 아니라 잡지를 쓴다는 생각으로 임해야 한다.

<br />

### 해법 영역에서 가져온 이름을 사용해라

당신의 코드를 읽는사람은 마케터도, 기획자도 아니다.  
따라서 당신은 전산 용어, 알고리즘 이름, 패턴, 수학 용어들은 조금 써도 된다.  
예를들어 Controller나 Service, JobQueue, Map 등  
로직을 확실하게 보여줄 수 있는 용어를 사용하는 것이 바람직하다.

<br />

### 문제 영역에서 가져온 이름을 사용해라

적절한 프로그래밍 용어가 없다면 문제 영역에서 이름을 가져온다.  
예를들어 손익분기점을 계산하는 함수에 calcBEP라는 함수를 쓰거나  
자금 가용 기간 산출 함수에서 calcBurnRate라는 함수를 작성한다면  
해당 분야 전문가에게 의미를 물어 파악할 수 있다.

<br />

### 의미 있는 맥락을 추가해라

변수 목록에 name, street, address, city, zipcode, state가 나열되어 있다면  
이는 분명 주소를 뜻한다는 것을 쉽게 알 수 있다.  
하지만 state만 덩그러니 놓여져 있다면 이를 알아채기란 쉽지 않다.  
이럴땐 Class를 이용하거나 Addr같은 수식어를 붙혀주면 좋다.

```java
state

AddrState

Address.state
```

어떤 표기법이 가장 명확한가? 변수에 좀 더 의미있는 맥락이 필요할때가 있다.

<br />

### 의미 없는 맥락을 없애라

위 상황과 반대의 경우이다.  
고급 휘발유 충전소(Gas Station Deluxe)라는 프로그램을 짤때  
GSD라는 축약어로 시작하는 클래스를 짓는다면, 전혀 바람직하지 않은 생각이다.  
짧은 이름보단 긴 이름이 낫지만 (나는 그다지 동의하지 않지만)

<br />

### 마치면서

좋은 이름을 선택하는 능력은 기술, 비즈니스, 관리의 문제보다는 교육의 문제이다.  
내가 맘대로 이름을 바꿔서 꼭 나아진다곤 할 수 없다.  
나에게 쉬운 그 이름이 누군가에겐 애매모호한 변수 명일 수도 있는것이다.  
하지만 누군가 질책할지도 모른다는 두려움에 코드를 개선하려는 노력을 절대 멈춰선 안된다.
