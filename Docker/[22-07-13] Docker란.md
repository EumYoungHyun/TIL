## What is Docker?

Docker란 컨테이너 기반의 오픈소스 가상화 플랫폼이다.

DevOps의 등장으로 개발주기가 짧아지면서 배포는 더 자주 이루어 졌고,  
마이크로서비스 아키텍쳐가 유행하면서 프로그램은 더 잘게 쪼개어져 관리가 더 어려워 졌다.  
새로운 툴들이 계속 나오고 클라우드가 발전할 수록 서버 관리가 극한으로 어려워지는 과정속에서 Docker의 등장으로 서버 관리 방식이 달라졌다.

![what is docker](https://eumericano.s3.ap-northeast-2.amazonaws.com/dev/what+is+docker.webp "what is docker")

컨테이너는 보통 배에 적재하는 네모난 화물 수송용 박스를 의미하는데 각각의 컨테이너 안에는 종류에 가리지 않는 다양한 화물을 넣을 수 있다.  
또한 운송 단위를 규격화하여 컨테이너선이나 트레일러 등 다양한 운송수단으로 쉽게 전달할 수 있다.

도커에서 이야기하는 컨테이너도 이와 비슷한데, 다양한 프로그램, 버전같은 실행 환경들을 컨테이너로 추상화하고 동일한 인터페이스를 제공하여 프로그램 배포 및 관리를 단순하게 만들 수 있다.  
백엔드 프로그램, 데이터베이스 서버, 메시지 큐 등 어떤 프로그램도 컨테이너로 추상화가 가능하고, AWS, Desktop, google Cloud, Azure등 다양한 곳에서 동일하게 실행 가능하다.  
※ 컨테이너를 가장 잘 사용하고 있는 기업은 구글로서 모든 서비스들이 컨테이너로 동작하고 2014년 기준 매주 20억개 가량의 컨테이너를 구동한다고 한다.

### 컨테이너(Container)

![docker container](https://eumericano.s3.ap-northeast-2.amazonaws.com/dev/docker+container.webp "docker container")

컨테이너는 격리된 공간에서 프로세스가 동작하는 기술이다.  
가상화 기술의 하나지만 Docker 이전의 방식들과는 차별이 있다.  
기존의 가상화 방식은 주로 OS를 가상화 했다.

VMware나 VirtualBox같은 가상머신은 호스트 OS위에 게스트 OS 전체를 가상화하여 사용하는 방식이다.  
비교적 사용법이 간단하지만 무겁고 느려서 운영환경에선 사용할 수 없었다.

이런 방식을 개선하기 위해 CPU 가상화 기술(HVM)이나 반가상화(Paravirtualization) 방식들이 등장했다.  
이러한 방식들도 게스트 OS를 필요로 하지만 전체를 가상화하지 않기 때문에 성능이 향상될 수 있었다.

하지만 이런 방식들도 결국 추가적인 OS를 설치하여 가상화를 하므로 성능 저하 이슈를 피할 수 없었다. 이를 더 개선해보고자 프로세스를 격리하는 방식이 등장하게 되었다.  
도커도 프로세스를 격리하는 방식으로 제작되었다.

![VM vs Docker](https://eumericano.s3.ap-northeast-2.amazonaws.com/dev/VM+vs+Docker.webp "VM vs Docker")

리눅스에서는 이 방식을 리눅스 컨테이너라고 하고 단순히 프로세스를 격리시키기 때문에 더 가볍게 동작한다.  
CPU나 메모리는 딱 프로세스가 필요한 만큼만 추가로 사용하고 성능적으로도 거의 손실이 없다.

> Docker의 기본 네트워크 모드는 Bridge모드로 약간의 성능 손실이 존재한다.  
> 네트워크 성능이 중요한 프로그램의 경우 --net=host 옵션을 사용한다.

하나의 서버에 여러개의 컨테이너를 실행하면 서로 영향을 미치지 않고 독립적으로 실행되어 마치 가벼운 VM을 사용하는 느낌을 준다.  
실행중인 컨테이너들에게 단순히 명령어나 패키지설치만이 아닌 사용자 추가, 프로세스 백그라운드 실행이나 CPU, 메모리 제한, 포트연결 호스트 디렉토리를 사용 등 다양하고 강력한 기능들을 지원한다.

### 이미지

이미지는 도커에서 가장 중요한 개념이다.

![Docker image](https://eumericano.s3.ap-northeast-2.amazonaws.com/dev/docker+image.webp "Docker image")

이미지는 컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있는데 이러한 값들은 정수로서 변하지 않는다.  
컨테이너는 이미지를 실행한 상태의 개념이고 추가되거나 변하는 값들은 컨테이너에 저장된다.  
마치 클래스처럼 같은 이미지에서 여러개의 컨테이너를 생성할 수 있고 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 남아있게 된다.

[References]

1. https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html
